<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lamp Color</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style type="text/css">
        form{
            height: 100vh;
            width: 100vw;
        }
    </style>
 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" 
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
    crossorigin="anonymous">
</head>
 
<body class="container" style="margin-top: 50px;
    width: 50%; height:auto;">
    <form id="contactForm" style="position: absolute; top: 0; left: 0;height: 100%;">
        <div class="card" style="width: 100%;height: 100%;background-color: black">
            <table style="width: 100%;height: 90%">
                <tr style="width: 100%;height: 50%;margin-top: 10px">
                    <td style="background-color: red;width: 50%;text-align: center;" onclick="submitred()">
                        <img src="redowl.png" style="width: 50%;margin-top: 10px;margin-bottom: 10px" onclick="submitred()">
                    </td>
                    <td style="background-color: green;width: 50%;text-align: center;" onclick="submitgreen()">
                        <img src="greenowl.png" style="width: 50%;margin-top: 10px;margin-bottom: 10px" onclick="submitred()">
                    </td> 
                </tr>
                <tr style="width: 100%;height: 50%;">
                    <td style="background-color: blue;width: 50%;height: 100%;text-align: center;" onclick="submitblue()">
                        <img src="blueowl.png" style="width: 50%;margin-top: 10px;margin-bottom: 10px" onclick="submitred()">
                    </td>
                    <td style="background-color: black;width: 50%;height: 100%;text-align: center;" onclick="submitblack()">
                        <img src="blackowl.png" style="width: 50%;margin-top: 10px;margin-bottom: 10px" onclick="submitred()">
                    </td> 
                </tr>
            </table>
            
            <p style="width: 100%; background-color: white;margin-top: 10px;height: 10%;font-size: 5em;text-align: center;" id='curr'><button style="background-color: white;text-align: center;text-color:black"></button></p>
        </div>
    </form>
 
    <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
    <script>
  // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCSk4EyeoJkGQPRAqaoY3PT7i_HPFagUXk",
            authDomain: "test2-694b4.firebaseapp.com",
            databaseURL: "https://test2-694b4-default-rtdb.firebaseio.com",
            projectId: "test2-694b4",
            storageBucket: "test2-694b4.appspot.com",
            messagingSenderId: "906422691079",
            appId: "1:906422691079:web:b5333c2b341b2795e051a2"
        };
        firebase.initializeApp(firebaseConfig);
        
        function submitgreen(){
            let userRef = firebase.database().ref('test/');
            userRef.update({'color':1})
        }
        function submitred(){
            let userRef = firebase.database().ref('test/');
            userRef.update({'color':2})
        }
        function submitblue(){
            let userRef = firebase.database().ref('test/');
            userRef.update({'color':0})
        }
        function submitblack(){
            let userRef = firebase.database().ref('test/');
            userRef.update({'color':3})
        }
        var messagesRef = firebase.database().ref('test');
        // get data from the database
        var temp = firebase.database().ref('test/color');
        var currcolor = -1;
        temp.on("value", function(snapshot) {
        console.log(snapshot.val());
        currcolor = snapshot.val();
        if(currcolor == 2){
            var element = document.getElementById("curr");
            element.style.backgroundColor = "#FF0000";

        }
        else if(currcolor == 0){
            var element = document.getElementById("curr");
            element.style.backgroundColor = "#0000FF";
        }
        else if(currcolor == 1){
            var element = document.getElementById("curr");
            element.style.backgroundColor = "#00FF00";
        }
        else{
            var element = document.getElementById("curr");
            element.style.backgroundColor = "#000000";        }
        }, function (error) {
        console.log("Error: " + error.code);
        });
        

    </script>
</body>
</html>
